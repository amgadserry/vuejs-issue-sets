/**
 * Created by amgadserry on 09/03/17.
 */
import _ from 'lodash'
export default {
  state: {
    location: {
      x: 0,
      y: 0
    },
    currentTree: {
      name: 'Amgad Serry',
      role: 'Role',
      level: 1,
      x: 0,
      y: 0,
      isSelected: true,
      employees: [
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry2',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: [
            {
              name: 'Amgad Serry',
              role: 'Role',
              level: 1,
              x: 0,
              y: 0,
              isSelected: false,
              employees: []
            },
            {
              name: 'Amgad Serry',
              role: 'Role',
              level: 1,
              x: 0,
              y: 0,
              isSelected: false,
              employees: [
                {
                  name: 'Amgad Serry',
                  role: 'Role',
                  level: 1,
                  x: 0,
                  y: 0,
                  isSelected: false,
                  employees: []
                },
                {
                  name: 'Amgad Serry',
                  role: 'Role',
                  level: 1,
                  x: 0,
                  y: 0,
                  isSelected: false,
                  employees: []
                },
                {
                  name: 'Amgad Serry',
                  role: 'Role',
                  level: 1,
                  x: 0,
                  y: 0,
                  isSelected: false,
                  employees: []
                },
                {
                  name: 'Amgad Serry',
                  role: 'Role',
                  level: 1,
                  x: 0,
                  y: 0,
                  isSelected: false,
                  employees: []
                }
              ]
            },
            {
              name: 'Amgad Serry',
              role: 'Role',
              level: 1,
              x: 0,
              y: 0,
              isSelected: false,
              employees: []
            },
            {
              name: 'Amgad Serry',
              role: 'Role',
              level: 1,
              x: 0,
              y: 0,
              isSelected: false,
              employees: []
            }
          ]
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        },
        {
          name: 'Amgad Serry',
          role: 'Role',
          level: 1,
          x: 0,
          y: 0,
          isSelected: false,
          employees: []
        }
      ]
    },
    selectedNodes: []
  },
  getters: {
    currentlySelectedLevel: (state) => {
      return state.selectedNodes.length
    }
  },
  mutations: {
    setLocation (state, location) {
      state.location = location
    },
    setCurrentTree (state, currentTree) {
      state.currentlySelectedLevel = currentTree.level
      setTimeout(() => { state.currentTree = _.cloneDeep(currentTree) }, 0)
    },
    setCurrentSelectedLevel (state, level) {
      state.currentlySelectedLevel = level
    },
    setSelected (state, data) {
      while (state.selectedNodes.length > data.level) {
        state.selectedNodes.pop()
      }
      if (state.selectedNodes.length === data.level && state.selectedNodes[state.selectedNodes.length - 1] !== data) {
        state.selectedNodes.pop()
      }
      if (state.selectedNodes[state.selectedNodes.length - 1] !== data) {
        state.selectedNodes.push(data)
      }
    }
  }
}
